{"ast":null,"code":"import * as THREE from \"three\";\nexport class GPUMonitor {\n  constructor(renderer) {\n    this.renderer = renderer;\n    this.gl = renderer.getContext();\n    this.currentTheme = 'light';\n    this.themeBaselineWatts = {\n      light: 14,\n      dark: 9,\n      'high-contrast': 11,\n      eink: 7,\n      oled: 6\n    };\n    this.stats = {\n      fps: 0,\n      frameTime: 0,\n      drawCalls: 0,\n      triangles: 0,\n      textures: 0,\n      memory: {\n        // NVX GPU memory (if available)\n        used: 0,\n        total: 0,\n        available: 0,\n        // JS heap memory (if available)\n        jsHeap: {\n          used: 0,\n          total: 0,\n          limit: 0\n        },\n        // WebGL resource counts\n        webgl: {\n          geometries: 0,\n          textures: 0,\n          programs: 0\n        }\n      },\n      gpu: {\n        temperature: null,\n        utilization: null,\n        power: null\n      }\n    };\n    this.frameCount = 0;\n    this.lastTime = performance.now();\n    this.frameTimes = [];\n    this.lastRenderNow = 0;\n    this.fpsSamples = [];\n    this.dynamicPeakFps = 60;\n\n    // Initialize WebGL extensions for monitoring\n    this.initWebGLExtensions();\n\n    // Start monitoring\n    this.startMonitoring();\n  }\n  setTheme(theme) {\n    this.currentTheme = theme || 'light';\n  }\n  initWebGLExtensions() {\n    // Check for available WebGL extensions\n    const extensions = this.gl.getSupportedExtensions();\n\n    // Memory info extension (if available)\n    if (extensions.includes('WEBGL_debug_renderer_info')) {\n      this.debugInfo = this.gl.getExtension('WEBGL_debug_renderer_info');\n    }\n\n    // Performance extension (if available)\n    if (extensions.includes('EXT_disjoint_timer_query')) {\n      this.timerQuery = this.gl.getExtension('EXT_disjoint_timer_query');\n    }\n\n    // Memory info extension (if available)\n    if (extensions.includes('WEBGL_lose_context')) {\n      this.loseContext = this.gl.getExtension('WEBGL_lose_context');\n    }\n\n    // Get GPU information\n    this.getGPUInfo();\n  }\n  getGPUInfo() {\n    try {\n      // Get renderer info\n      const rendererInfo = this.gl.getParameter(this.gl.RENDERER);\n      const vendorInfo = this.gl.getParameter(this.gl.VENDOR);\n\n      // Get GPU memory info if available (NVX extension constants)\n      try {\n        const GPU_MEMORY_INFO_TOTAL_AVAILABLE_MEMORY_NVX = 0x9049 - 0x0002; // 0x9047\n        const GPU_MEMORY_INFO_CURRENT_AVAILABLE_VIDMEM_NVX = 0x904A - 0x0002; // 0x9048\n        if (this.gl.getParameter) {\n          const total = this.gl.getParameter(GPU_MEMORY_INFO_TOTAL_AVAILABLE_MEMORY_NVX);\n          const avail = this.gl.getParameter(GPU_MEMORY_INFO_CURRENT_AVAILABLE_VIDMEM_NVX);\n          if (typeof total === 'number' && typeof avail === 'number') {\n            this.stats.memory.total = total;\n            this.stats.memory.available = avail;\n            this.stats.memory.used = Math.max(0, total - avail);\n          }\n        }\n      } catch (_) {\n        // ignore if not supported\n      }\n      console.log('GPU Info:', {\n        renderer: rendererInfo,\n        vendor: vendorInfo,\n        memory: this.stats.memory\n      });\n    } catch (error) {\n      console.warn('Could not get GPU info:', error);\n    }\n  }\n  startMonitoring() {\n    this.monitorLoop();\n  }\n  monitorLoop() {\n    const currentTime = performance.now();\n    // Update WebGL stats\n    this.updateWebGLStats();\n\n    // Estimate GPU utilization based on frame time and complexity\n    this.estimateGPUUtilization();\n    this.lastTime = currentTime;\n    requestAnimationFrame(() => this.monitorLoop());\n  }\n\n  // Call this from the render loop to record actual rendered frame cadence\n  onFrameRendered(now) {\n    if (!this.lastRenderNow) {\n      this.lastRenderNow = now;\n      return;\n    }\n    const delta = now - this.lastRenderNow;\n    this.lastRenderNow = now;\n    // Keep last 60 render frame times\n    this.frameTimes.push(delta);\n    if (this.frameTimes.length > 60) {\n      this.frameTimes.shift();\n    }\n    const avgFrameTime = this.frameTimes.reduce((a, b) => a + b, 0) / this.frameTimes.length;\n    if (avgFrameTime && isFinite(avgFrameTime)) {\n      this.stats.frameTime = avgFrameTime;\n      this.stats.fps = 1000 / avgFrameTime;\n      // Track FPS samples for dynamic peak calculation\n      this.fpsSamples.push(this.stats.fps);\n      if (this.fpsSamples.length > 120) {\n        // ~2s window at 60fps\n        this.fpsSamples.shift();\n      }\n      // Dynamic peak FPS based on recent window\n      const recentPeak = Math.max(...this.fpsSamples);\n      if (isFinite(recentPeak) && recentPeak > 0) {\n        this.dynamicPeakFps = recentPeak;\n      }\n    }\n  }\n  updateWebGLStats() {\n    try {\n      // Get current WebGL state\n      const info = this.renderer.info;\n      this.stats.drawCalls = info.render.calls;\n      this.stats.triangles = info.render.triangles;\n      this.stats.textures = info.memory.textures;\n      // WebGL resources\n      if (info.memory) {\n        this.stats.memory.webgl.geometries = info.memory.geometries || 0;\n        this.stats.memory.webgl.textures = info.memory.textures || 0;\n      }\n      // Programs length if available\n      if (Array.isArray(info.programs)) {\n        this.stats.memory.webgl.programs = info.programs.length;\n      }\n      // JS Heap memory (Chrome-only)\n      if (performance && performance.memory) {\n        this.stats.memory.jsHeap.used = performance.memory.usedJSHeapSize || 0;\n        this.stats.memory.jsHeap.total = performance.memory.totalJSHeapSize || 0;\n        this.stats.memory.jsHeap.limit = performance.memory.jsHeapSizeLimit || 0;\n      }\n    } catch (error) {\n      console.warn('Could not update WebGL stats:', error);\n    }\n  }\n  estimateGPUUtilization() {\n    var _this$themeBaselineWa;\n    // Approximate utilization relative to recent peak FPS\n    // With an FPS cap, FPS drops but GPU work per frame stays similar, so\n    // using relative FPS to recent peak gives a visible utilization change.\n    const fps = Math.max(1, this.stats.fps || 0);\n    const peak = Math.max(1, this.dynamicPeakFps || 60);\n    const relativeFps = Math.min(1, fps / peak); // 0..1\n    // Complexity hint keeps some variation when FPS is steady\n    const complexity = Math.min(1, this.stats.drawCalls / 200 + this.stats.triangles / 500000);\n    let utilization = (relativeFps * 0.7 + complexity * 0.3) * 100;\n    utilization = Math.max(5, Math.min(100, utilization));\n    this.stats.gpu.utilization = Math.round(utilization);\n\n    // Temperature model with softer response\n    const baseTemp = 40; // idle baseline\n    const tempSpan = 35; // range up to ~75C\n    this.stats.gpu.temperature = baseTemp + tempSpan * (utilization / 100);\n\n    // Power estimate: theme baseline + dynamic component scaled by utilization\n    const themeBase = (_this$themeBaselineWa = this.themeBaselineWatts[this.currentTheme]) !== null && _this$themeBaselineWa !== void 0 ? _this$themeBaselineWa : 10;\n    const dynamicWatts = 70; // headroom for load-dependent power\n    this.stats.gpu.power = Math.round(themeBase + dynamicWatts * (utilization / 100));\n  }\n  getStats() {\n    return {\n      ...this.stats\n    };\n  }\n  resetStats() {\n    this.frameCount = 0;\n    this.frameTimes = [];\n    this.lastTime = performance.now();\n  }\n  destroy() {\n    // Cleanup if needed\n  }\n}","map":{"version":3,"names":["THREE","GPUMonitor","constructor","renderer","gl","getContext","currentTheme","themeBaselineWatts","light","dark","eink","oled","stats","fps","frameTime","drawCalls","triangles","textures","memory","used","total","available","jsHeap","limit","webgl","geometries","programs","gpu","temperature","utilization","power","frameCount","lastTime","performance","now","frameTimes","lastRenderNow","fpsSamples","dynamicPeakFps","initWebGLExtensions","startMonitoring","setTheme","theme","extensions","getSupportedExtensions","includes","debugInfo","getExtension","timerQuery","loseContext","getGPUInfo","rendererInfo","getParameter","RENDERER","vendorInfo","VENDOR","GPU_MEMORY_INFO_TOTAL_AVAILABLE_MEMORY_NVX","GPU_MEMORY_INFO_CURRENT_AVAILABLE_VIDMEM_NVX","avail","Math","max","_","console","log","vendor","error","warn","monitorLoop","currentTime","updateWebGLStats","estimateGPUUtilization","requestAnimationFrame","onFrameRendered","delta","push","length","shift","avgFrameTime","reduce","a","b","isFinite","recentPeak","info","render","calls","Array","isArray","usedJSHeapSize","totalJSHeapSize","jsHeapSizeLimit","_this$themeBaselineWa","peak","relativeFps","min","complexity","round","baseTemp","tempSpan","themeBase","dynamicWatts","getStats","resetStats","destroy"],"sources":["C:/D-Drive/AI For Retail/Sustainability Hackathon FLO 2025/Latest Code/sustainable-ux/src/GPUMonitor.js"],"sourcesContent":["import * as THREE from \"three\";\n\nexport class GPUMonitor {\n  constructor(renderer) {\n    this.renderer = renderer;\n    this.gl = renderer.getContext();\n    this.currentTheme = 'light';\n    this.themeBaselineWatts = {\n      light: 14,\n      dark: 9,\n      'high-contrast': 11,\n      eink: 7,\n      oled: 6\n    };\n    this.stats = {\n      fps: 0,\n      frameTime: 0,\n      drawCalls: 0,\n      triangles: 0,\n      textures: 0,\n      memory: {\n        // NVX GPU memory (if available)\n        used: 0,\n        total: 0,\n        available: 0,\n        // JS heap memory (if available)\n        jsHeap: {\n          used: 0,\n          total: 0,\n          limit: 0\n        },\n        // WebGL resource counts\n        webgl: {\n          geometries: 0,\n          textures: 0,\n          programs: 0\n        }\n      },\n      gpu: {\n        temperature: null,\n        utilization: null,\n        power: null\n      }\n    };\n    \n    this.frameCount = 0;\n    this.lastTime = performance.now();\n    this.frameTimes = [];\n    this.lastRenderNow = 0;\n    this.fpsSamples = [];\n    this.dynamicPeakFps = 60;\n    \n    // Initialize WebGL extensions for monitoring\n    this.initWebGLExtensions();\n    \n    // Start monitoring\n    this.startMonitoring();\n  }\n\n  setTheme(theme) {\n    this.currentTheme = theme || 'light';\n  }\n  \n  initWebGLExtensions() {\n    // Check for available WebGL extensions\n    const extensions = this.gl.getSupportedExtensions();\n    \n    // Memory info extension (if available)\n    if (extensions.includes('WEBGL_debug_renderer_info')) {\n      this.debugInfo = this.gl.getExtension('WEBGL_debug_renderer_info');\n    }\n    \n    // Performance extension (if available)\n    if (extensions.includes('EXT_disjoint_timer_query')) {\n      this.timerQuery = this.gl.getExtension('EXT_disjoint_timer_query');\n    }\n    \n    // Memory info extension (if available)\n    if (extensions.includes('WEBGL_lose_context')) {\n      this.loseContext = this.gl.getExtension('WEBGL_lose_context');\n    }\n    \n    // Get GPU information\n    this.getGPUInfo();\n  }\n  \n  getGPUInfo() {\n    try {\n      // Get renderer info\n      const rendererInfo = this.gl.getParameter(this.gl.RENDERER);\n      const vendorInfo = this.gl.getParameter(this.gl.VENDOR);\n      \n      // Get GPU memory info if available (NVX extension constants)\n      try {\n        const GPU_MEMORY_INFO_TOTAL_AVAILABLE_MEMORY_NVX = 0x9049 - 0x0002; // 0x9047\n        const GPU_MEMORY_INFO_CURRENT_AVAILABLE_VIDMEM_NVX = 0x904A - 0x0002; // 0x9048\n        if (this.gl.getParameter) {\n          const total = this.gl.getParameter(GPU_MEMORY_INFO_TOTAL_AVAILABLE_MEMORY_NVX);\n          const avail = this.gl.getParameter(GPU_MEMORY_INFO_CURRENT_AVAILABLE_VIDMEM_NVX);\n          if (typeof total === 'number' && typeof avail === 'number') {\n            this.stats.memory.total = total;\n            this.stats.memory.available = avail;\n            this.stats.memory.used = Math.max(0, total - avail);\n          }\n        }\n      } catch (_) {\n        // ignore if not supported\n      }\n      \n      console.log('GPU Info:', {\n        renderer: rendererInfo,\n        vendor: vendorInfo,\n        memory: this.stats.memory\n      });\n      \n    } catch (error) {\n      console.warn('Could not get GPU info:', error);\n    }\n  }\n  \n  startMonitoring() {\n    this.monitorLoop();\n  }\n  \n  monitorLoop() {\n    const currentTime = performance.now();\n    // Update WebGL stats\n    this.updateWebGLStats();\n    \n    // Estimate GPU utilization based on frame time and complexity\n    this.estimateGPUUtilization();\n    \n    this.lastTime = currentTime;\n    \n    requestAnimationFrame(() => this.monitorLoop());\n  }\n\n  // Call this from the render loop to record actual rendered frame cadence\n  onFrameRendered(now) {\n    if (!this.lastRenderNow) {\n      this.lastRenderNow = now;\n      return;\n    }\n    const delta = now - this.lastRenderNow;\n    this.lastRenderNow = now;\n    // Keep last 60 render frame times\n    this.frameTimes.push(delta);\n    if (this.frameTimes.length > 60) {\n      this.frameTimes.shift();\n    }\n    const avgFrameTime = this.frameTimes.reduce((a, b) => a + b, 0) / this.frameTimes.length;\n    if (avgFrameTime && isFinite(avgFrameTime)) {\n      this.stats.frameTime = avgFrameTime;\n      this.stats.fps = 1000 / avgFrameTime;\n      // Track FPS samples for dynamic peak calculation\n      this.fpsSamples.push(this.stats.fps);\n      if (this.fpsSamples.length > 120) { // ~2s window at 60fps\n        this.fpsSamples.shift();\n      }\n      // Dynamic peak FPS based on recent window\n      const recentPeak = Math.max(...this.fpsSamples);\n      if (isFinite(recentPeak) && recentPeak > 0) {\n        this.dynamicPeakFps = recentPeak;\n      }\n    }\n  }\n  \n  updateWebGLStats() {\n    try {\n      // Get current WebGL state\n      const info = this.renderer.info;\n      \n      this.stats.drawCalls = info.render.calls;\n      this.stats.triangles = info.render.triangles;\n      this.stats.textures = info.memory.textures;\n      // WebGL resources\n      if (info.memory) {\n        this.stats.memory.webgl.geometries = info.memory.geometries || 0;\n        this.stats.memory.webgl.textures = info.memory.textures || 0;\n      }\n      // Programs length if available\n      if (Array.isArray(info.programs)) {\n        this.stats.memory.webgl.programs = info.programs.length;\n      }\n      // JS Heap memory (Chrome-only)\n      if (performance && performance.memory) {\n        this.stats.memory.jsHeap.used = performance.memory.usedJSHeapSize || 0;\n        this.stats.memory.jsHeap.total = performance.memory.totalJSHeapSize || 0;\n        this.stats.memory.jsHeap.limit = performance.memory.jsHeapSizeLimit || 0;\n      }\n      \n    } catch (error) {\n      console.warn('Could not update WebGL stats:', error);\n    }\n  }\n  \n  estimateGPUUtilization() {\n    // Approximate utilization relative to recent peak FPS\n    // With an FPS cap, FPS drops but GPU work per frame stays similar, so\n    // using relative FPS to recent peak gives a visible utilization change.\n    const fps = Math.max(1, this.stats.fps || 0);\n    const peak = Math.max(1, this.dynamicPeakFps || 60);\n    const relativeFps = Math.min(1, fps / peak); // 0..1\n    // Complexity hint keeps some variation when FPS is steady\n    const complexity = Math.min(1, (this.stats.drawCalls / 200) + (this.stats.triangles / 500000));\n    let utilization = (relativeFps * 0.7 + complexity * 0.3) * 100;\n    utilization = Math.max(5, Math.min(100, utilization));\n\n    this.stats.gpu.utilization = Math.round(utilization);\n\n    // Temperature model with softer response\n    const baseTemp = 40; // idle baseline\n    const tempSpan = 35; // range up to ~75C\n    this.stats.gpu.temperature = baseTemp + (tempSpan * (utilization / 100));\n\n    // Power estimate: theme baseline + dynamic component scaled by utilization\n    const themeBase = this.themeBaselineWatts[this.currentTheme] ?? 10;\n    const dynamicWatts = 70; // headroom for load-dependent power\n    this.stats.gpu.power = Math.round(themeBase + dynamicWatts * (utilization / 100));\n  }\n  \n  getStats() {\n    return { ...this.stats };\n  }\n  \n  resetStats() {\n    this.frameCount = 0;\n    this.frameTimes = [];\n    this.lastTime = performance.now();\n  }\n  \n  destroy() {\n    // Cleanup if needed\n  }\n}"],"mappings":"AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAE9B,OAAO,MAAMC,UAAU,CAAC;EACtBC,WAAWA,CAACC,QAAQ,EAAE;IACpB,IAAI,CAACA,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACC,EAAE,GAAGD,QAAQ,CAACE,UAAU,CAAC,CAAC;IAC/B,IAAI,CAACC,YAAY,GAAG,OAAO;IAC3B,IAAI,CAACC,kBAAkB,GAAG;MACxBC,KAAK,EAAE,EAAE;MACTC,IAAI,EAAE,CAAC;MACP,eAAe,EAAE,EAAE;MACnBC,IAAI,EAAE,CAAC;MACPC,IAAI,EAAE;IACR,CAAC;IACD,IAAI,CAACC,KAAK,GAAG;MACXC,GAAG,EAAE,CAAC;MACNC,SAAS,EAAE,CAAC;MACZC,SAAS,EAAE,CAAC;MACZC,SAAS,EAAE,CAAC;MACZC,QAAQ,EAAE,CAAC;MACXC,MAAM,EAAE;QACN;QACAC,IAAI,EAAE,CAAC;QACPC,KAAK,EAAE,CAAC;QACRC,SAAS,EAAE,CAAC;QACZ;QACAC,MAAM,EAAE;UACNH,IAAI,EAAE,CAAC;UACPC,KAAK,EAAE,CAAC;UACRG,KAAK,EAAE;QACT,CAAC;QACD;QACAC,KAAK,EAAE;UACLC,UAAU,EAAE,CAAC;UACbR,QAAQ,EAAE,CAAC;UACXS,QAAQ,EAAE;QACZ;MACF,CAAC;MACDC,GAAG,EAAE;QACHC,WAAW,EAAE,IAAI;QACjBC,WAAW,EAAE,IAAI;QACjBC,KAAK,EAAE;MACT;IACF,CAAC;IAED,IAAI,CAACC,UAAU,GAAG,CAAC;IACnB,IAAI,CAACC,QAAQ,GAAGC,WAAW,CAACC,GAAG,CAAC,CAAC;IACjC,IAAI,CAACC,UAAU,GAAG,EAAE;IACpB,IAAI,CAACC,aAAa,GAAG,CAAC;IACtB,IAAI,CAACC,UAAU,GAAG,EAAE;IACpB,IAAI,CAACC,cAAc,GAAG,EAAE;;IAExB;IACA,IAAI,CAACC,mBAAmB,CAAC,CAAC;;IAE1B;IACA,IAAI,CAACC,eAAe,CAAC,CAAC;EACxB;EAEAC,QAAQA,CAACC,KAAK,EAAE;IACd,IAAI,CAACpC,YAAY,GAAGoC,KAAK,IAAI,OAAO;EACtC;EAEAH,mBAAmBA,CAAA,EAAG;IACpB;IACA,MAAMI,UAAU,GAAG,IAAI,CAACvC,EAAE,CAACwC,sBAAsB,CAAC,CAAC;;IAEnD;IACA,IAAID,UAAU,CAACE,QAAQ,CAAC,2BAA2B,CAAC,EAAE;MACpD,IAAI,CAACC,SAAS,GAAG,IAAI,CAAC1C,EAAE,CAAC2C,YAAY,CAAC,2BAA2B,CAAC;IACpE;;IAEA;IACA,IAAIJ,UAAU,CAACE,QAAQ,CAAC,0BAA0B,CAAC,EAAE;MACnD,IAAI,CAACG,UAAU,GAAG,IAAI,CAAC5C,EAAE,CAAC2C,YAAY,CAAC,0BAA0B,CAAC;IACpE;;IAEA;IACA,IAAIJ,UAAU,CAACE,QAAQ,CAAC,oBAAoB,CAAC,EAAE;MAC7C,IAAI,CAACI,WAAW,GAAG,IAAI,CAAC7C,EAAE,CAAC2C,YAAY,CAAC,oBAAoB,CAAC;IAC/D;;IAEA;IACA,IAAI,CAACG,UAAU,CAAC,CAAC;EACnB;EAEAA,UAAUA,CAAA,EAAG;IACX,IAAI;MACF;MACA,MAAMC,YAAY,GAAG,IAAI,CAAC/C,EAAE,CAACgD,YAAY,CAAC,IAAI,CAAChD,EAAE,CAACiD,QAAQ,CAAC;MAC3D,MAAMC,UAAU,GAAG,IAAI,CAAClD,EAAE,CAACgD,YAAY,CAAC,IAAI,CAAChD,EAAE,CAACmD,MAAM,CAAC;;MAEvD;MACA,IAAI;QACF,MAAMC,0CAA0C,GAAG,MAAM,GAAG,MAAM,CAAC,CAAC;QACpE,MAAMC,4CAA4C,GAAG,MAAM,GAAG,MAAM,CAAC,CAAC;QACtE,IAAI,IAAI,CAACrD,EAAE,CAACgD,YAAY,EAAE;UACxB,MAAMhC,KAAK,GAAG,IAAI,CAAChB,EAAE,CAACgD,YAAY,CAACI,0CAA0C,CAAC;UAC9E,MAAME,KAAK,GAAG,IAAI,CAACtD,EAAE,CAACgD,YAAY,CAACK,4CAA4C,CAAC;UAChF,IAAI,OAAOrC,KAAK,KAAK,QAAQ,IAAI,OAAOsC,KAAK,KAAK,QAAQ,EAAE;YAC1D,IAAI,CAAC9C,KAAK,CAACM,MAAM,CAACE,KAAK,GAAGA,KAAK;YAC/B,IAAI,CAACR,KAAK,CAACM,MAAM,CAACG,SAAS,GAAGqC,KAAK;YACnC,IAAI,CAAC9C,KAAK,CAACM,MAAM,CAACC,IAAI,GAAGwC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAExC,KAAK,GAAGsC,KAAK,CAAC;UACrD;QACF;MACF,CAAC,CAAC,OAAOG,CAAC,EAAE;QACV;MAAA;MAGFC,OAAO,CAACC,GAAG,CAAC,WAAW,EAAE;QACvB5D,QAAQ,EAAEgD,YAAY;QACtBa,MAAM,EAAEV,UAAU;QAClBpC,MAAM,EAAE,IAAI,CAACN,KAAK,CAACM;MACrB,CAAC,CAAC;IAEJ,CAAC,CAAC,OAAO+C,KAAK,EAAE;MACdH,OAAO,CAACI,IAAI,CAAC,yBAAyB,EAAED,KAAK,CAAC;IAChD;EACF;EAEAzB,eAAeA,CAAA,EAAG;IAChB,IAAI,CAAC2B,WAAW,CAAC,CAAC;EACpB;EAEAA,WAAWA,CAAA,EAAG;IACZ,MAAMC,WAAW,GAAGnC,WAAW,CAACC,GAAG,CAAC,CAAC;IACrC;IACA,IAAI,CAACmC,gBAAgB,CAAC,CAAC;;IAEvB;IACA,IAAI,CAACC,sBAAsB,CAAC,CAAC;IAE7B,IAAI,CAACtC,QAAQ,GAAGoC,WAAW;IAE3BG,qBAAqB,CAAC,MAAM,IAAI,CAACJ,WAAW,CAAC,CAAC,CAAC;EACjD;;EAEA;EACAK,eAAeA,CAACtC,GAAG,EAAE;IACnB,IAAI,CAAC,IAAI,CAACE,aAAa,EAAE;MACvB,IAAI,CAACA,aAAa,GAAGF,GAAG;MACxB;IACF;IACA,MAAMuC,KAAK,GAAGvC,GAAG,GAAG,IAAI,CAACE,aAAa;IACtC,IAAI,CAACA,aAAa,GAAGF,GAAG;IACxB;IACA,IAAI,CAACC,UAAU,CAACuC,IAAI,CAACD,KAAK,CAAC;IAC3B,IAAI,IAAI,CAACtC,UAAU,CAACwC,MAAM,GAAG,EAAE,EAAE;MAC/B,IAAI,CAACxC,UAAU,CAACyC,KAAK,CAAC,CAAC;IACzB;IACA,MAAMC,YAAY,GAAG,IAAI,CAAC1C,UAAU,CAAC2C,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,GAAGC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC7C,UAAU,CAACwC,MAAM;IACxF,IAAIE,YAAY,IAAII,QAAQ,CAACJ,YAAY,CAAC,EAAE;MAC1C,IAAI,CAACjE,KAAK,CAACE,SAAS,GAAG+D,YAAY;MACnC,IAAI,CAACjE,KAAK,CAACC,GAAG,GAAG,IAAI,GAAGgE,YAAY;MACpC;MACA,IAAI,CAACxC,UAAU,CAACqC,IAAI,CAAC,IAAI,CAAC9D,KAAK,CAACC,GAAG,CAAC;MACpC,IAAI,IAAI,CAACwB,UAAU,CAACsC,MAAM,GAAG,GAAG,EAAE;QAAE;QAClC,IAAI,CAACtC,UAAU,CAACuC,KAAK,CAAC,CAAC;MACzB;MACA;MACA,MAAMM,UAAU,GAAGvB,IAAI,CAACC,GAAG,CAAC,GAAG,IAAI,CAACvB,UAAU,CAAC;MAC/C,IAAI4C,QAAQ,CAACC,UAAU,CAAC,IAAIA,UAAU,GAAG,CAAC,EAAE;QAC1C,IAAI,CAAC5C,cAAc,GAAG4C,UAAU;MAClC;IACF;EACF;EAEAb,gBAAgBA,CAAA,EAAG;IACjB,IAAI;MACF;MACA,MAAMc,IAAI,GAAG,IAAI,CAAChF,QAAQ,CAACgF,IAAI;MAE/B,IAAI,CAACvE,KAAK,CAACG,SAAS,GAAGoE,IAAI,CAACC,MAAM,CAACC,KAAK;MACxC,IAAI,CAACzE,KAAK,CAACI,SAAS,GAAGmE,IAAI,CAACC,MAAM,CAACpE,SAAS;MAC5C,IAAI,CAACJ,KAAK,CAACK,QAAQ,GAAGkE,IAAI,CAACjE,MAAM,CAACD,QAAQ;MAC1C;MACA,IAAIkE,IAAI,CAACjE,MAAM,EAAE;QACf,IAAI,CAACN,KAAK,CAACM,MAAM,CAACM,KAAK,CAACC,UAAU,GAAG0D,IAAI,CAACjE,MAAM,CAACO,UAAU,IAAI,CAAC;QAChE,IAAI,CAACb,KAAK,CAACM,MAAM,CAACM,KAAK,CAACP,QAAQ,GAAGkE,IAAI,CAACjE,MAAM,CAACD,QAAQ,IAAI,CAAC;MAC9D;MACA;MACA,IAAIqE,KAAK,CAACC,OAAO,CAACJ,IAAI,CAACzD,QAAQ,CAAC,EAAE;QAChC,IAAI,CAACd,KAAK,CAACM,MAAM,CAACM,KAAK,CAACE,QAAQ,GAAGyD,IAAI,CAACzD,QAAQ,CAACiD,MAAM;MACzD;MACA;MACA,IAAI1C,WAAW,IAAIA,WAAW,CAACf,MAAM,EAAE;QACrC,IAAI,CAACN,KAAK,CAACM,MAAM,CAACI,MAAM,CAACH,IAAI,GAAGc,WAAW,CAACf,MAAM,CAACsE,cAAc,IAAI,CAAC;QACtE,IAAI,CAAC5E,KAAK,CAACM,MAAM,CAACI,MAAM,CAACF,KAAK,GAAGa,WAAW,CAACf,MAAM,CAACuE,eAAe,IAAI,CAAC;QACxE,IAAI,CAAC7E,KAAK,CAACM,MAAM,CAACI,MAAM,CAACC,KAAK,GAAGU,WAAW,CAACf,MAAM,CAACwE,eAAe,IAAI,CAAC;MAC1E;IAEF,CAAC,CAAC,OAAOzB,KAAK,EAAE;MACdH,OAAO,CAACI,IAAI,CAAC,+BAA+B,EAAED,KAAK,CAAC;IACtD;EACF;EAEAK,sBAAsBA,CAAA,EAAG;IAAA,IAAAqB,qBAAA;IACvB;IACA;IACA;IACA,MAAM9E,GAAG,GAAG8C,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAChD,KAAK,CAACC,GAAG,IAAI,CAAC,CAAC;IAC5C,MAAM+E,IAAI,GAAGjC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE,IAAI,CAACtB,cAAc,IAAI,EAAE,CAAC;IACnD,MAAMuD,WAAW,GAAGlC,IAAI,CAACmC,GAAG,CAAC,CAAC,EAAEjF,GAAG,GAAG+E,IAAI,CAAC,CAAC,CAAC;IAC7C;IACA,MAAMG,UAAU,GAAGpC,IAAI,CAACmC,GAAG,CAAC,CAAC,EAAG,IAAI,CAAClF,KAAK,CAACG,SAAS,GAAG,GAAG,GAAK,IAAI,CAACH,KAAK,CAACI,SAAS,GAAG,MAAO,CAAC;IAC9F,IAAIa,WAAW,GAAG,CAACgE,WAAW,GAAG,GAAG,GAAGE,UAAU,GAAG,GAAG,IAAI,GAAG;IAC9DlE,WAAW,GAAG8B,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACmC,GAAG,CAAC,GAAG,EAAEjE,WAAW,CAAC,CAAC;IAErD,IAAI,CAACjB,KAAK,CAACe,GAAG,CAACE,WAAW,GAAG8B,IAAI,CAACqC,KAAK,CAACnE,WAAW,CAAC;;IAEpD;IACA,MAAMoE,QAAQ,GAAG,EAAE,CAAC,CAAC;IACrB,MAAMC,QAAQ,GAAG,EAAE,CAAC,CAAC;IACrB,IAAI,CAACtF,KAAK,CAACe,GAAG,CAACC,WAAW,GAAGqE,QAAQ,GAAIC,QAAQ,IAAIrE,WAAW,GAAG,GAAG,CAAE;;IAExE;IACA,MAAMsE,SAAS,IAAAR,qBAAA,GAAG,IAAI,CAACpF,kBAAkB,CAAC,IAAI,CAACD,YAAY,CAAC,cAAAqF,qBAAA,cAAAA,qBAAA,GAAI,EAAE;IAClE,MAAMS,YAAY,GAAG,EAAE,CAAC,CAAC;IACzB,IAAI,CAACxF,KAAK,CAACe,GAAG,CAACG,KAAK,GAAG6B,IAAI,CAACqC,KAAK,CAACG,SAAS,GAAGC,YAAY,IAAIvE,WAAW,GAAG,GAAG,CAAC,CAAC;EACnF;EAEAwE,QAAQA,CAAA,EAAG;IACT,OAAO;MAAE,GAAG,IAAI,CAACzF;IAAM,CAAC;EAC1B;EAEA0F,UAAUA,CAAA,EAAG;IACX,IAAI,CAACvE,UAAU,GAAG,CAAC;IACnB,IAAI,CAACI,UAAU,GAAG,EAAE;IACpB,IAAI,CAACH,QAAQ,GAAGC,WAAW,CAACC,GAAG,CAAC,CAAC;EACnC;EAEAqE,OAAOA,CAAA,EAAG;IACR;EAAA;AAEJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}